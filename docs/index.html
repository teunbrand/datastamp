<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stamping data with metadata • datastamp</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Stamping data with metadata">
<meta property="og:description" content="The goal of datastamp is to make it easy to attach some metadata to 
    R objects. This can be convenient if you want to make `.RData` or `.rds` 
    objects self-documenting, by attaching time of creation or the path to the 
    script used to generate the data.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">datastamp</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/teunbrand/datastamp/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="datastamp" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#datastamp" class="anchor"></a>datastamp</h1></div>
<!-- badges: start -->

<p>The goal of datastamp is to make it easy to attach some metadata to R objects. This can be convenient if you want to make <code>.RData</code> or <code>.rds</code> objects self-documenting, by attaching time of creation or the path to the script used to generate the data.</p>
<p>The package has basic functionality but isn’t fine-tuned to handle any type of data one might want to document in R.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"teunbrand/datastamp"</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a basic example which shows you how you would use the datastamp package at the end of an analysis.</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="co"># Library statements</span>
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">datastamp</span>)

<span class="co"># Declare files</span>
<span class="no">input_file</span>  <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"extdata"</span>, <span class="st">"loremipsum.txt"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"datastamp"</span>)
<span class="no">output_file</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempfile</a></span>(<span class="st">"important_results"</span>, <span class="kw">fileext</span> <span class="kw">=</span> <span class="st">".rds"</span>)

<span class="co"># Load data</span>
<span class="no">data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span>(<span class="no">input_file</span>)

<span class="co"># Start very complicated analysis</span>
<span class="no">result</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/chartr.html">toupper</a></span>(<span class="no">data</span>)

<span class="co"># Saving results</span>
<span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">saveRDS</a></span>(
  <span class="fu"><a href="reference/stamp.html">stamp</a></span>(<span class="no">result</span>, <span class="kw">origin_files</span> <span class="kw">=</span> <span class="no">input_file</span>),  <span class="co"># &lt;-- Here be a datastamp!</span>
  <span class="kw">file</span> <span class="kw">=</span> <span class="no">output_file</span>
)</pre></div>
<p>So, imagine parking the project above for six months and you forgot some of the circumstances under which these files were created. Or, someone else send you this datastamped data, but you are unclear on the details. The datastamp package attaches some metadata to the R object that might help you remember.</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="no">old_data</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span>(<span class="no">output_file</span>)

<span class="co"># Who created this?</span>
<span class="fu"><a href="reference/info_stamp.html">info_user</a></span>(<span class="no">old_data</span>)
<span class="co">#&gt;           user effective_user </span>
<span class="co">#&gt;   "t.vd.brand"   "t.vd.brand"</span>

<span class="co"># When was this object timestamped?</span>
<span class="fu"><a href="reference/info_stamp.html">info_time</a></span>(<span class="no">old_data</span>)
<span class="co">#&gt; [1] "2020-10-16 16:30:24 CEST"</span>

<span class="co"># What script was used to generate the results?</span>
<span class="fu"><a href="reference/info_stamp.html">info_script</a></span>(<span class="no">old_data</span>)
<span class="co">#&gt; [1] "/DATA/users/t.vd.brand/packages/01_active/datastamp/README.Rmd"</span>

<span class="co"># What raw files went into these results?</span>
<span class="fu"><a href="reference/info_stamp.html">info_files</a></span>(<span class="no">old_data</span>)
<span class="co">#&gt; [1] "/home/t.vd.brand/R/x86_64-pc-linux-gnu-library/3.6/datastamp/extdata/loremipsum.txt"</span></pre></div>
</div>
<div id="how-does-it-work" class="section level2">
<h2 class="hasAnchor">
<a href="#how-does-it-work" class="anchor"></a>How does it work?</h2>
<p>When an object is stamped, a ‘datastamp’ attribute is attached to the object.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="co"># Printing atomic vectors report the datastamp attribute.</span>
(<span class="no">old_data</span>)
<span class="co">#&gt; [1] "LOREM IPSUM DOLOR SIT AMET, PARTURIENT PELLENTESQUE, PRETIUM AUCTOR LEO. ID HENDRERIT IN AC, VEL, DUIS AT, LEO. TEMPOR A IMPERDIET ADIPISCING VESTIBULUM APTENT SED LOREM CURSUS DUI, ODIO TORTOR. VOLUTPAT IPSUM FAUCIBUS PLACERAT, SAPIEN APTENT IN INTERDUM QUIS FERMENTUM. LOREM, EU ANTE VIVERRA, TINCIDUNT BIBENDUM EROS A LAOREET JUSTO MAECENAS. COMMODO ETIAM LOBORTIS HABITANT CONVALLIS FACILISIS SENECTUS LIGULA. FELIS MONTES VENENATIS HABITANT QUIS EROS NULLAM FINIBUS, AMET MATTIS EGESTAS. PENATIBUS QUISQUE NUNC, SED ID TURPIS IPSUM SED. VEHICULA A AC VEL MAECENAS BLANDIT SIT VENENATIS IN."                                                                                                                                                                                                                          </span>
<span class="co">#&gt; [2] "NULLA, AENEAN CONGUE SED DIAM, SIT FACILISI DUI QUIS. TEMPUS LOREM ERAT URNA EU AUGUE VEL. VOLUTPAT IN, QUIS SED MAURIS NIBH DICTUMST ADIPISCING FINIBUS ULLAMCORPER. ERAT VOLUTPAT PRETIUM SED. EGET EROS TURPIS PELLENTESQUE PHARETRA MASSA ALIQUAM! UT SED MONTES CONSECTETUR SUSPENDISSE ARCU NON PELLENTESQUE DUI ULLAMCORPER EGESTAS MONTES? VITAE TORQUENT PELLENTESQUE TEMPOR, NISL PORTTITOR, ET PER. VESTIBULUM, SUSPENDISSE JUSTO IN. SED CURABITUR, NEC NON ALIQUET PULVINAR! QUIS UT EGET EST LOREM NOSTRA MOLESTIE NEQUE. UT TORQUENT PRAESENT APTENT EU AMET JUSTO ET LOBORTIS ODIO LACINIA."                                                                                                                                                                                                                                 </span>
<span class="co">#&gt; [3] "FRINGILLA EU BLANDIT PHARETRA IN. CRAS FAUCIBUS FUSCE QUIS NON LEO VEL POTENTI UT ODIO IACULIS. EROS VULPUTATE, LIGULA VULPUTATE ET INTEGER CUM MASSA IN. ALIQUAM ERAT BIBENDUM MONTES ALIQUET? MAXIMUS HIMENAEOS UT RIDICULUS NON MAURIS LIBERO. NISI A IN, EGESTAS DUIS APTENT EROS. FEUGIAT LIGULA IN MALESUADA LACINIA SED CRAS, NON EGET POSUERE LIGULA FAMES IN. CONSEQUAT SEMPER VITAE AC LAOREET, PHARETRA HABITANT PENATIBUS. PORTA NASCETUR SUSPENDISSE NON VITAE PHASELLUS ID, VEL INTERDUM EGET PLATEA URNA. A ALIQUET EST NATOQUE VEL FAUCIBUS ALIQUAM, HIMENAEOS, LACUS IN A. CURAE IN ELEMENTUM SEM VESTIBULUM CUBILIA PURUS IMPERDIET QUISQUE, SED ACCUMSAN! TORQUENT TORTOR COMMODO MATTIS NOSTRA A COMMODO NEC COMMODO AENEAN. LIGULA DUIS LOREM MAURIS, MAURIS. MAECENAS ANTE AT POSUERE, TURPIS ALIQUAM CUBILIA ALIQUAM."</span>
<span class="co">#&gt; [4] "NATOQUE EFFICITUR ACCUMSAN, AUCTOR. QUIS INTEGER ERAT AC VARIUS TURPIS ALIQUAM SCELERISQUE. LAOREET PELLENTESQUE AT RISUS AT DICTUMST UT JUSTO. DONEC VEL FUSCE VEL SED CRAS CURAE VENENATIS COMMODO DONEC QUISQUE UT MI IN. ET, ENIM FACILISIS, PROIN CONSEQUAT IN NUNC ORCI. SED AC HAC MALESUADA RIDICULUS A NAM EU VELIT VIVERRA TEMPOR CURABITUR. SEM EUISMOD NULLA LIBERO TACITI. PULVINAR AMET PELLENTESQUE NON LIBERO SEM EFFICITUR DIAM. INTERDUM ALIQUAM QUIS FUSCE MAURIS VITAE VIVERRA PER PHASELLUS AD."                                                                                                                                                                                                                                                                                                                        </span>
<span class="co">#&gt; [5] "UT MOLESTIE AC ET PULVINAR APTENT AUGUE, AUCTOR. AUCTOR SUSPENDISSE A TRISTIQUE TEMPOR CONDIMENTUM. IACULIS IN PRAESENT SAPIEN VITAE MI DICTUMST. PER, VEL EGESTAS VITAE NEC CONVALLIS EGESTAS VIVAMUS SED IPSUM POSUERE! NOSTRA PENATIBUS AT FAMES, SOLLICITUDIN VELIT ELEMENTUM LIBERO ALIQUAM PHASELLUS PORTA. AT SED MAURIS NAM NON EFFICITUR EFFICITUR LAOREET SED ET. NULLA UT, QUAM LOREM DONEC SIT IPSUM DICTUMST ET. TORTOR LACUS QUIS HENDRERIT HENDRERIT VEL DOLOR, CURAE EFFICITUR. CURAE EROS, UT NON HIMENAEOS MALESUADA DONEC. PELLENTESQUE CONSECTETUR CONSEQUAT RUTRUM A PLACERAT. FRINGILLA DIAM AD ERAT. ELEMENTUM FELIS, AC EUISMOD VEL AD LOBORTIS DICTUM."                                                                                                                                                             </span>
<span class="co">#&gt; attr(,"datastamp")</span>
<span class="co">#&gt; [datastamp] with script, time, system, session and files</span>

<span class="co"># You can explicitly retrieve the stamp with `get_stamp()`</span>
<span class="no">stamp</span> <span class="kw">&lt;-</span> <span class="fu"><a href="reference/get_stamp.html">get_stamp</a></span>(<span class="no">old_data</span>)
(<span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span>(<span class="no">stamp</span>))
<span class="co">#&gt; [1] "script"  "time"    "system"  "session" "files"</span>

<span class="co"># The stamp itself is also a list, so you can retrieve information by name</span>
<span class="no">stamp</span>$<span class="no">time</span>
<span class="co">#&gt; [1] "2020-10-16 16:30:24 CEST"</span></pre></div>
<p>If you think some parts of the datastamp aren’t necessary to include you can either set a global option or explicitly pass <code>FALSE</code> as argument for that part.</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="co"># Via argument</span>
(<span class="fu"><a href="reference/get_stamp.html">get_stamp</a></span>(<span class="fu"><a href="reference/stamp.html">stamp</a></span>(<span class="fl">1</span>:<span class="fl">5</span>, <span class="kw">session</span> <span class="kw">=</span> <span class="fl">FALSE</span>)))
<span class="co">#&gt; [datastamp] with script, time and system</span>

<span class="co"># Via global options</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="st">"datastamp.time"</span> <span class="kw">=</span> <span class="fl">FALSE</span>)
(<span class="fu"><a href="reference/get_stamp.html">get_stamp</a></span>(<span class="fu"><a href="reference/stamp.html">stamp</a></span>(<span class="fl">1</span>:<span class="fl">5</span>)))
<span class="co">#&gt; [datastamp] with script, system and session</span></pre></div>
</div>
<div id="caveats" class="section level2">
<h2 class="hasAnchor">
<a href="#caveats" class="anchor"></a>Caveats</h2>
<p>In interactive use, the current script can not be guessed with 100% accuracy, but it does a decent job in reporting ‘console’ or the currently active document in RStudio. This does not necessarily need to be the document where the data is stamped: if you have lengthy runtime on a chunk that contains <code><a href="reference/stamp.html">stamp()</a></code> and you switch document-tabs for example. It should pretty much do the right thing in non-interactive use though.</p>
<p>For the ‘origin_files’ argument, the stamping checks whether the files exist and reports the path with <code><a href="https://rdrr.io/r/base/normalizePath.html">normalizePath()</a></code>, which I think resolves symbolic links into absolute paths.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/teunbrand/datastamp/">https://​github.com/​teunbrand/​datastamp/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/teunbrand/datastamp/issues">https://​github.com/​teunbrand/​datastamp/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Teun van den Brand <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9335-7468" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://codecov.io/gh/teunbrand/datastamp?branch=master"><img src="https://codecov.io/gh/teunbrand/datastamp/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://travis-ci.com/teunbrand/datastamp"><img src="https://travis-ci.com/teunbrand/datastamp.svg?branch=master" alt="Travis build status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Teun van den Brand.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
